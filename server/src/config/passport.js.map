{"version":3,"sources":["passport.js"],"names":["require","config","opts","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","secretOrKey","process","env","JWT_SECRET","module","exports","passport","use","JwtStrategy","jwt_payload","done","User","findById","_id","then","user","err","console","log"],"mappings":";;;;AAAA;;AAMA;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,IAAMC,IAAI,GAAG,EAAb;AACAA,IAAI,CAACC,cAAL,GAAsBC,wBAAWC,2BAAX,EAAtB;AACAH,IAAI,CAACI,WAAL,GAAmBC,OAAO,CAACC,GAAR,CAAYC,UAA/B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAAAC,QAAQ,EAAI;AACzBA,EAAAA,QAAQ,CAACC,GAAT,CACI,IAAIC,qBAAJ,CAAgBZ,IAAhB,EAAsB,UAACa,WAAD,EAAcC,IAAd,EAAuB;AAEzCC,qBAAKC,QAAL,CACQH,WAAW,CAACI,GADpB,EAGKC,IAHL,CAGU,UAAAC,IAAI,EAAI;AAEV,UAAIA,IAAJ,EAAU;AACN,eAAOL,IAAI,CAAC,IAAD,EAAOK,IAAP,CAAX;AACH;;AACD,aAAOL,IAAI,CAAC,IAAD,EAAO,KAAP,CAAX;AACH,KATL,WAUW,UAAAM,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KAVd;AAWH,GAbD,CADJ;AAgBH,CAjBD","sourcesContent":["import {\r\n    Strategy as JwtStrategy\r\n} from 'passport-jwt';\r\nimport {\r\n    ExtractJwt\r\n} from 'passport-jwt';\r\nimport User from '../models/User';\r\nrequire('dotenv').config();\r\n\r\nconst opts = {};\r\nopts.jwtFromRequest = ExtractJwt.fromAuthHeaderAsBearerToken();\r\nopts.secretOrKey = process.env.JWT_SECRET;\r\n\r\nmodule.exports = passport => {\r\n    passport.use(\r\n        new JwtStrategy(opts, (jwt_payload, done) => {\r\n\r\n            User.findById(\r\n                    jwt_payload._id\r\n                )\r\n                .then(user => {\r\n\r\n                    if (user) {\r\n                        return done(null, user);\r\n                    }\r\n                    return done(null, false);\r\n                })\r\n                .catch(err => console.log(err));\r\n        })\r\n    );\r\n};"],"file":"passport.js"}